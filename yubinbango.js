var CACHE=[];!function(t){var e=function(){function t(t,e){if(void 0===t&&(t=""),this.URL="https://yubinbango.github.io/yubinbango-data/data",this.REGION=[null,"北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],t){var n=t.replace(/[０-９]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}).match(/\d/g).join(""),r=this.chk7(n);r?this.getAddr(r,e):e(this.addrDic())}}return t.prototype.chk7=function(t){if(7===t.length)return t},t.prototype.addrDic=function(t,e,n,r,o){return void 0===t&&(t=""),void 0===e&&(e=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=""),{region_id:t,region:e,locality:n,street:r,extended:o}},t.prototype.selectAddr=function(t){return t&&t[0]&&t[1]?this.addrDic(t[0],this.REGION[t[0]],t[1],t[2],t[3]):this.addrDic()},t.prototype.jsonp=function(t,e){window.$yubin=function(t){return e(t)};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("charset","UTF-8"),n.setAttribute("src",t),document.head.appendChild(n)},t.prototype.getAddr=function(e,n){var r=this,o=e.substr(0,3);if(o in CACHE&&e in CACHE[o])return n(this.selectAddr(CACHE[o][e]));this.jsonp(this.URL+"/"+o+".js",function(t){return CACHE[o]=t,n(r.selectAddr(t[e]))})},t}();t.Core=e}(YubinBango||(YubinBango={}));var YubinBango,ISO31661JP=["Japan","JP","JPN","JAPAN"],HADRLIST=["p-region-id","p-region","p-locality","p-street-address","p-extended-address"];!function(o){var t=function(){function r(){this.hadrloop()}return r.prototype.hadrloop=function(){var n=this,t=document.querySelectorAll(".h-adr");[].map.call(t,function(t){if(n.countryNameCheck(t)){var e=t.querySelectorAll(".p-postal-code");e[e.length-1].addEventListener("keyup",function(t){r.prototype.applyDom(n.getFormNode(t.target.parentNode))},!1)}})},r.prototype.getFormNode=function(t){return"FORM"===t.tagName||t.classList.contains("h-adr")?t:this.getFormNode(t.parentNode)},r.prototype.countryNameCheck=function(t){var e=t.querySelector(".p-country-name");return[e.innerHTML,e.value].some(function(t){return 0<=ISO31661JP.indexOf(t)})},r.prototype.applyDom=function(e){var n=this,t=e.querySelectorAll(".p-postal-code");new o.Core(this.reduceVal(t),function(t){return n.setAddr(e,t)})},r.prototype.reduceVal=function(t){return[].map.call(t,function(t){return t.value}).reduce(function(t,e){return t+e})},r.prototype.setAddr=function(n,r){[this.postalFormClear,this.postalFormSet].map(function(e){return HADRLIST.map(function(t){return e(t,n,r)})})},r.prototype.postalFormClear=function(t,e,n){if(n){var r=e.querySelectorAll("."+t);[].map.call(r,function(t){return t.value=""})}},r.prototype.postalFormSet=function(e,t,n){var r={"p-region-id":n.region_id,"p-region":n.region,"p-locality":n.locality,"p-street-address":n.street,"p-extended-address":n.extended},o=t.querySelectorAll("."+e);[].map.call(o,function(t){return t.value+=r[e]?r[e]:""})},r}();o.MicroformatDom=t}(YubinBango||(YubinBango={})),document.addEventListener("DOMContentLoaded",function(){new YubinBango.MicroformatDom},!1);
//# sourceMappingURL=yubinbango.js.map
